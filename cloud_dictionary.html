<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Cloud Computing Dictionary</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s ease;
        }
        /* Custom styles for audio player */
        .audio-player-container audio::-webkit-media-controls-enclosure {
            background-color: transparent;
        }
        /* Dark mode transitions */
        .dark body {
            background-color: #1a202c;
        }
        .dark .bg-white {
            background-color: #2d3748;
        }
        .dark .text-gray-800 {
            color: #e2e8f0;
        }
        .dark .text-gray-600 {
            color: #a0aec0;
        }
        .dark .border-gray-300 {
            border-color: #4a5568;
        }
        .dark .bg-blue-50 {
            background-color: #252c38;
            border-color: #3b424f;
            color: #e2e8f0;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4 transition-colors duration-300">

    <div class="bg-white rounded-2xl shadow-xl w-full max-w-3xl p-8 md:p-10 transition-colors duration-300">
        <h1 class="text-2xl md:text-3xl font-bold text-center mb-4 text-gray-800 transition-colors duration-300">AWS Cloud Computing Dictionary</h1>
        <p class="text-center text-gray-600 mb-6 transition-colors duration-300 text-sm md:text-base">Search for common AWS services and terms to get their technical definitions and pronunciations.</p>
        
        <!-- Search Input and Button -->
        <div class="flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-4 mb-8">
            <input type="text" id="termInput" placeholder="e.g., EC2, S3, VPC..." class="w-full px-5 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 bg-white dark:bg-gray-700 dark:text-gray-200" autocomplete="off">
            <button id="searchButton" class="w-full sm:w-auto px-6 py-3 bg-blue-600 text-white font-semibold rounded-xl hover:bg-blue-700 transition-all duration-200">
                Search
            </button>
        </div>

        <!-- Result Display Area -->
        <div id="resultContainer" class="bg-blue-50 border border-blue-200 rounded-xl p-6 text-gray-700 hidden transition-colors duration-300 dark:bg-gray-700 dark:text-gray-200">
            <div id="loadingIndicator" class="text-center text-blue-500 font-medium hidden">
                Searching...
            </div>
            <div id="errorMessage" class="text-center text-red-500 font-medium hidden">
                Term not found. Please check your spelling and try a different term.
            </div>
            <div id="definitionContent" class="hidden">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4">
                    <div class="flex-1">
                        <h3 id="termDisplay" class="text-2xl font-bold mb-1 dark:text-gray-50"></h3>
                        <p id="phoneticDisplay" class="text-lg text-gray-500 dark:text-gray-400"></p>
                    </div>
                </div>
                
                <h4 class="text-xl font-semibold mt-4 mb-2 dark:text-gray-50">Definition:</h4>
                <p id="definitionDisplay" class="text-lg leading-relaxed dark:text-gray-300"></p>
            </div>
        </div>

        <!-- External API and Gemini API Buttons -->
        <div id="externalApiButtons" class="mt-8 pt-4 border-t border-gray-300 hidden transition-colors duration-300 dark:border-gray-600">
            <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 mb-4">
                <button id="dictionaryDefinitionButton" class="w-full sm:w-1/2 px-6 py-3 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition-all duration-200">
                    ✨ Look up Word Definition ✨
                </button>
                <button id="geminiUseCaseButton" class="w-full sm:w-1/2 px-6 py-3 bg-teal-600 text-white font-semibold rounded-xl hover:bg-teal-700 transition-all duration-200">
                    ✨ Use-Case Example ✨
                </button>
            </div>
            <!-- API Result Area (shared by both buttons) -->
            <div id="apiResultContainer" class="bg-gray-100 border border-gray-300 rounded-xl p-6 text-gray-700 hidden dark:bg-gray-800 dark:border-gray-600 dark:text-gray-200">
                <div id="apiLoading" class="text-center text-indigo-500 font-medium hidden">
                    Generating information...
                </div>
                <div id="apiError" class="text-center text-red-500 font-medium hidden">
                    Unable to get information.
                </div>
                <div id="apiContent" class="hidden">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4">
                        <div class="flex-1">
                            <h4 id="apiTitle" class="text-xl font-semibold mb-2"></h4>
                            <p id="apiPhonetic" class="text-lg text-gray-500 dark:text-gray-400"></p>
                        </div>
                        <div id="apiAudioPlayerContainer" class="audio-player-container flex-shrink-0 mt-4 sm:mt-0">
                            <!-- Audio element will be inserted here dynamically -->
                        </div>
                    </div>
                    <p id="apiText" class="text-lg leading-relaxed"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Theme Toggle Button -->
    <button id="themeToggle" class="fixed bottom-6 right-6 p-4 rounded-full shadow-lg text-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-200 transition-colors duration-300">
        🌙
    </button>

    <script>
        // A curated, hardcoded list of common AWS Cloud Computing terms.
        const cloudTerms = [
            {
                word: "EC2",
                phonetic: "(ee-see-two)",
                definition: "Amazon Elastic Compute Cloud (EC2) is a web service that provides resizable compute capacity in the cloud. It allows users to rent virtual servers (instances) on which to run their own computer applications."
            },
            {
                word: "S3",
                phonetic: "(es-three)",
                definition: "Amazon Simple Storage Service (S3) is a scalable object storage service that provides a simple web services interface to retrieve and store data from anywhere on the web. It's used for data lakes, websites, mobile apps, and backups."
            },
            {
                word: "VPC",
                phonetic: "(vee-pee-see)",
                definition: "Amazon Virtual Private Cloud (VPC) lets you provision a logically isolated section of the AWS Cloud where you can launch AWS resources in a virtual network that you define. You have complete control over your virtual networking environment."
            },
            {
                word: "Lambda",
                phonetic: "(lam-duh)",
                definition: "AWS Lambda is a serverless, event-driven compute service that lets you run code for virtually any type of application or backend service without provisioning or managing servers. You only pay for the compute time you consume."
            },
            {
                word: "IAM",
                phonetic: "(eye-am)",
                definition: "AWS Identity and Access Management (IAM) is a web service that helps you securely control access to AWS resources. You use IAM to manage users, groups, and permissions to allow or deny access to AWS services."
            },
            {
                word: "DynamoDB",
                phonetic: "(dy-na-mo-dee-bee)",
                definition: "Amazon DynamoDB is a fully managed, serverless NoSQL database that delivers single-digit millisecond performance at any scale. It is a key-value and document database used for applications that need low-latency data access."
            },
            {
                word: "CloudFormation",
                phonetic: "(cloud-for-may-shun)",
                definition: "AWS CloudFormation is a service that helps you model and set up your AWS resources. You can define your infrastructure as code in a template and deploy it as a single unit (a 'stack') to automate provisioning."
            },
            {
                word: "CloudWatch",
                phonetic: "(cloud-watch)",
                definition: "Amazon CloudWatch is a monitoring and observability service that provides data and actionable insights to monitor your applications, respond to system-wide performance changes, and optimize resource utilization."
            },
            {
                word: "RDS",
                phonetic: "(are-dee-es)",
                definition: "Amazon Relational Database Service (RDS) is a managed service that makes it easy to set up, operate, and scale a relational database in the cloud. It supports various database engines like MySQL, PostgreSQL, and Oracle."
            },
            {
                word: "Route 53",
                phonetic: "(route-fifty-three)",
                definition: "Amazon Route 53 is a scalable and highly available Domain Name System (DNS) web service. It translates human-friendly domain names (like 'example.com') into the IP addresses that computers use to connect to each other."
            },
            {
                word: "SNS",
                phonetic: "(es-en-es)",
                definition: "Amazon Simple Notification Service (SNS) is a fully managed messaging service for both application-to-application (A2A) and application-to-person (A2P) communication. It allows you to send messages to subscribed endpoints or clients."
            },
            {
                word: "SQS",
                phonetic: "(es-queue-es)",
                definition: "Amazon Simple Queue Service (SQS) is a fully managed message queuing service. It lets you decouple and scale microservices, distributed systems, and serverless applications by creating queues to buffer and process messages."
            },
            {
                word: "EKS",
                phonetic: "(ee-kay-es)",
                definition: "Amazon Elastic Kubernetes Service (EKS) is a managed service that makes it easy for you to run Kubernetes on AWS without needing to install, operate, and maintain your own Kubernetes control plane or nodes."
            },
            {
                word: "ECS",
                phonetic: "(ee-see-es)",
                definition: "Amazon Elastic Container Service (ECS) is a highly scalable, high-performance container orchestration service that supports Docker containers. It makes it easy to run, stop, and manage containers on a cluster."
            },
            {
                word: "CloudFront",
                phonetic: "(cloud-front)",
                definition: "Amazon CloudFront is a fast content delivery network (CDN) service that securely delivers data, videos, applications, and APIs to customers globally with low latency, high transfer speeds, all within a developer-friendly environment."
            },
            {
                word: "API Gateway",
                phonetic: "(ay-pee-eye-gate-way)",
                definition: "Amazon API Gateway is a fully managed service that makes it easy for developers to create, publish, maintain, monitor, and secure APIs at any scale. It acts as a 'front door' for applications to access backend services."
            },
            {
                word: "Cognito",
                phonetic: "(cog-ni-toe)",
                definition: "Amazon Cognito provides authentication, authorization, and user management for your web and mobile apps. It supports social identity providers and adds sign-up and sign-in functionality for users."
            },
            {
                word: "Elastic Beanstalk",
                phonetic: "(ee-lass-tick-been-stalk)",
                definition: "AWS Elastic Beanstalk is an easy-to-use service for deploying and scaling web applications and services. It handles the deployment of your code and manages the underlying resources, such as EC2 instances and load balancers."
            },
            {
                word: "Aurora",
                phonetic: "(aw-ro-ra)",
                definition: "Amazon Aurora is a MySQL and PostgreSQL-compatible relational database built for the cloud. It combines the performance of traditional enterprise databases with the simplicity and cost-effectiveness of open-source databases."
            },
            {
                word: "Glue",
                phonetic: "(glue)",
                definition: "AWS Glue is a fully managed extract, transform, and load (ETL) service that makes it easy to prepare and load your data for analytics. It discovers your data and suggests transformations to make it ready for analysis."
            },
            {
                word: "Kinesis",
                phonetic: "(ki-nee-sis)",
                definition: "Amazon Kinesis is a platform for streaming data on AWS. It allows you to collect, process, and analyze real-time streaming data to get timely insights and react quickly to new information."
            },
            {
                word: "Redshift",
                phonetic: "(red-shift)",
                definition: "Amazon Redshift is a fully managed, petabyte-scale data warehouse service in the cloud. It makes it simple and cost-effective to analyze all your data using your existing business intelligence tools."
            }
        ];

        // --- DOM Elements ---
        const termInput = document.getElementById('termInput');
        const searchButton = document.getElementById('searchButton');
        const resultContainer = document.getElementById('resultContainer');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const errorMessage = document.getElementById('errorMessage');
        const definitionContent = document.getElementById('definitionContent');
        const termDisplay = document.getElementById('termDisplay');
        const phoneticDisplay = document.getElementById('phoneticDisplay');
        const definitionDisplay = document.getElementById('definitionDisplay');
        const externalApiButtons = document.getElementById('externalApiButtons');
        const dictionaryDefinitionButton = document.getElementById('dictionaryDefinitionButton');
        const geminiUseCaseButton = document.getElementById('geminiUseCaseButton');
        const apiResultContainer = document.getElementById('apiResultContainer');
        const apiLoading = document.getElementById('apiLoading');
        const apiError = document.getElementById('apiError');
        const apiContent = document.getElementById('apiContent');
        const apiTitle = document.getElementById('apiTitle');
        const apiPhonetic = document.getElementById('apiPhonetic');
        const apiText = document.getElementById('apiText');
        const apiAudioPlayerContainer = document.getElementById('apiAudioPlayerContainer');
        const themeToggle = document.getElementById('themeToggle');
        const htmlElement = document.documentElement;

        // --- Theme Management ---
        const storedTheme = localStorage.getItem('theme');
        if (storedTheme) {
            htmlElement.classList.add(storedTheme);
            themeToggle.textContent = storedTheme === 'dark' ? '☀️' : '🌙';
        } else {
            // Default to light mode
            htmlElement.classList.add('light');
            localStorage.setItem('theme', 'light');
        }

        themeToggle.addEventListener('click', () => {
            if (htmlElement.classList.contains('dark')) {
                htmlElement.classList.remove('dark');
                htmlElement.classList.add('light');
                localStorage.setItem('theme', 'light');
                themeToggle.textContent = '🌙';
            } else {
                htmlElement.classList.remove('light');
                htmlElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
                themeToggle.textContent = '☀️';
            }
        });

        // --- Event Listeners ---
        searchButton.addEventListener('click', searchDefinition);
        termInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                searchDefinition();
            }
        });
        dictionaryDefinitionButton.addEventListener('click', fetchDictionaryDefinition);
        geminiUseCaseButton.addEventListener('click', () => fetchGeminiResponse('use-case'));

        // --- Main Search Function ---
        function searchDefinition() {
            const term = termInput.value.trim().toLowerCase();

            if (!term) {
                resultContainer.classList.add('hidden');
                externalApiButtons.classList.add('hidden');
                return;
            }

            // Show loading state
            resultContainer.classList.remove('hidden');
            loadingIndicator.classList.remove('hidden');
            errorMessage.classList.add('hidden');
            definitionContent.classList.add('hidden');
            externalApiButtons.classList.add('hidden');
            apiResultContainer.classList.add('hidden');

            const foundTerm = cloudTerms.find(item => item.word.toLowerCase() === term);

            // Simulate a brief delay for a more realistic user experience
            setTimeout(() => {
                loadingIndicator.classList.add('hidden');
                if (foundTerm) {
                    // Update UI with the found data
                    termDisplay.textContent = foundTerm.word;
                    phoneticDisplay.textContent = foundTerm.phonetic;
                    definitionDisplay.textContent = foundTerm.definition;
                    definitionContent.classList.remove('hidden');
                    externalApiButtons.classList.remove('hidden');
                } else {
                    // Show message for external API searches
                    errorMessage.classList.remove('hidden');
                    definitionContent.classList.add('hidden');
                    externalApiButtons.classList.remove('hidden');
                }
            }, 500);
        }

        // --- Dictionary API Function ---
        async function fetchDictionaryDefinition() {
            const term = termInput.value.trim();
            if (!term) return;

            // Clear previous API content
            apiAudioPlayerContainer.innerHTML = '';

            apiResultContainer.classList.remove('hidden');
            apiLoading.classList.remove('hidden');
            apiError.classList.add('hidden');
            apiContent.classList.add('hidden');
            apiTitle.textContent = '';
            apiPhonetic.textContent = '';
            apiText.textContent = '';
            
            try {
                const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${term}`);
                
                if (!response.ok) {
                    throw new Error('Word not found in general dictionary.');
                }

                const data = await response.json();
                const entry = data[0];
                const definition = entry.meanings[0].definitions[0].definition;
                const phoneticText = entry.phonetic || (entry.phonetics.length > 0 ? entry.phonetics[0].text : '');
                const audioUrl = entry.phonetics.find(p => p.audio)?.audio;

                apiTitle.textContent = `${term}'s Definition`;
                apiPhonetic.textContent = phoneticText;
                apiText.textContent = definition;

                if (audioUrl) {
                    const audio = new Audio(audioUrl);
                    const playButton = document.createElement('button');
                    playButton.className = 'px-4 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-all duration-200';
                    playButton.textContent = '🔊 Play';
                    playButton.addEventListener('click', () => audio.play());
                    apiAudioPlayerContainer.appendChild(playButton);
                }

                apiLoading.classList.add('hidden');
                apiContent.classList.remove('hidden');

            } catch (error) {
                console.error("Error fetching dictionary data:", error);
                apiLoading.classList.add('hidden');
                apiError.classList.remove('hidden');
                apiContent.classList.add('hidden');
                apiError.textContent = 'Unable to get definition from external API.';
            }
        }

        // --- Gemini API Function ---
        async function fetchGeminiResponse(type) {
            const term = termInput.value.trim();
            if (!term) return;

            apiResultContainer.classList.remove('hidden');
            apiLoading.classList.remove('hidden');
            apiError.classList.add('hidden');
            apiContent.classList.add('hidden');
            apiTitle.textContent = '';
            apiPhonetic.textContent = '';
            apiText.textContent = '';
            apiAudioPlayerContainer.innerHTML = '';
            
            let systemPrompt;
            let userQuery;
            let title;

            if (type === 'use-case') {
                systemPrompt = "You are a cloud architect. Provide a concise, real-world use-case. Do not add any unnecessary text or introduction.";
                userQuery = `Provide an example of a use-case for ${term} in Amazon Web Services (AWS).`;
                title = `${term}'s Use-Case Example`;
            }

            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                tools: [{ "google_search": {} }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                }
            };

            let retries = 0;
            const maxRetries = 3;
            let response;
            
            while (retries < maxRetries) {
                try {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) {
                        break;
                    } else if (response.status === 429) {
                        retries++;
                        const delay = Math.pow(2, retries) * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                    } else {
                        throw new Error(`API error: ${response.status}`);
                    }
                } catch (error) {
                    console.error("Fetch error:", error);
                    apiLoading.classList.add('hidden');
                    apiError.classList.remove('hidden');
                    return;
                }
            }
            
            if (!response || !response.ok) {
                console.error("Failed to fetch API response after multiple retries.");
                apiLoading.classList.add('hidden');
                apiError.classList.remove('hidden');
                apiError.textContent = 'Unable to get information from Gemini.';
                return;
            }

            try {
                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    const text = candidate.content.parts[0].text;
                    apiTitle.textContent = title;
                    apiText.textContent = text;
                    apiLoading.classList.add('hidden');
                    apiContent.classList.remove('hidden');
                } else {
                    throw new Error("Invalid response format.");
                }
            } catch (error) {
                console.error("Parsing error:", error);
                apiLoading.classList.add('hidden');
                apiError.classList.remove('hidden');
                apiError.textContent = 'Error parsing Gemini response.';
            }
        }
    </script>
</body>
</html>
